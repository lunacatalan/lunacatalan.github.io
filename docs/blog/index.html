<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Luna Herschenfeld-Catalán">
<meta name="dcterms.date" content="2023-12-14">
<meta name="description" content="Investigating the role of climatic and anthropogenic factors on groundwater level declines in the Qazvin Plain Aquifer from 1985-2019.">

<title>Climatic Trends and Agriculture Expansion on Declining Water Levels in Arid Aquifer, Iran</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Luna Catalán</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lunacatalan" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Climatic Trends and Agriculture Expansion on Declining Water Levels in Arid Aquifer, Iran</h1>
                  <div>
        <div class="description">
          Investigating the role of climatic and anthropogenic factors on groundwater level declines in the Qazvin Plain Aquifer from 1985-2019.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Statistics</div>
                <div class="quarto-category">Geospatial</div>
                <div class="quarto-category">Quarto</div>
                <div class="quarto-category">R</div>
                <div class="quarto-category">Python</div>
                <div class="quarto-category">MEDS</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Luna Herschenfeld-Catalán </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 14, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#problem" id="toc-problem" class="nav-link active" data-scroll-target="#problem">Problem</a></li>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources">Data Sources</a></li>
  <li><a href="#basic-analysis-approach" id="toc-basic-analysis-approach" class="nav-link" data-scroll-target="#basic-analysis-approach">Basic Analysis Approach</a>
  <ul class="collapse">
  <li><a href="#multiple-linear-regression-with-aei-mean" id="toc-multiple-linear-regression-with-aei-mean" class="nav-link" data-scroll-target="#multiple-linear-regression-with-aei-mean">Multiple Linear Regression with AEI mean</a></li>
  <li><a href="#simple-linear-regression-with-median-soil-adjusted-vegetation-index-savi" id="toc-simple-linear-regression-with-median-soil-adjusted-vegetation-index-savi" class="nav-link" data-scroll-target="#simple-linear-regression-with-median-soil-adjusted-vegetation-index-savi">Simple Linear Regression with median Soil Adjusted Vegetation Index (SAVI)</a></li>
  </ul></li>
  <li><a href="#conclusions-and-future-analysis" id="toc-conclusions-and-future-analysis" class="nav-link" data-scroll-target="#conclusions-and-future-analysis">Conclusions and Future Analysis</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>REPOSITORY: To find full analysis click this <a href="https://github.com/lunacatalan/groundwater-decline">repo!</a></p>
<section id="problem" class="level1">
<h1>Problem</h1>
<p>Groundwater supplies water resources for drinking water and irrigated agriculture for millions of people around the world. Groundwater levels are declining around the world. This is partly do to changing climatic trends, where declines in precipitation is leading to declines in recharge of groundwater storage in aquifers. Over the last couple of decades, agriculture production in many areas has also increased (James &amp; Elfers, 2015). In arid regions, agriculture is mainly fed by groundwater since there is not enough surface water available, or it does not rain enough.</p>
<p>In the last 40 years, groundwater level declines in the Qazvin Plain of Iran have accelerated. Past research has indicated that agricultural production and population growth have contributed to over abstraction (Babaee et al., 2020)</p>
<p>This analysis can help guide groundwater management strategy by shedding light on how different factors are contributing to the rapid decline, with the hope of developing effective management strategies to protect groundwater resources.</p>
</section>
<section id="data-sources" class="level1">
<h1>Data Sources</h1>
<p><strong>GROUNDWATER LEVEL</strong></p>
<p>Groundwater level depth data was provided by Scott Jasechko’s lab. Multiple measurements were taken from 1978-2018, with 2002-2003 data missing. I used the mean values each year to calculate the change in groundwater levels from one year to the next.</p>
<p><strong>ANNUAL PRECIPITATION</strong></p>
<p>I focused on annual precipitation as a proxy for climatic trends in this analysis. This data was provided by CHELSA-EarthEnv (Karger, 2021).</p>
<p><strong>AGRICULTURE PRODUCTION</strong></p>
<p>The biggest hurtle was identifying an effective proxy for agricultural production. My first attempt was using <strong>Area Equipped for Irrigation</strong> (AEI) as a measure of groundwater level decline. This data was produced by Piyush Mehta et al.&nbsp;(2023) using sub-national irrigation statistics that were aggregated to 5-year periods to develop a gridded map at 5 arc-min resolution of area equipped for irrigation. I used data from 1985-2015, and accessed them here: <a href="https://zenodo.org/records/7809342">Zenodo</a>.</p>
<p>However, I was unhappy with the coarseness of this dataset so I turned to Soil Adjusted Vegetation Index (SAVI)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> measurements over time to calculate a change in agricultural area from 1984-2019. I accessed this data in Python from the Microsoft Planetary Computer. My Python workbook is stored as <code>agriculture_landsat.ipynb</code> in the <a href="https://github.com/lunacatalan/groundwater-decline">repository</a> for this post, where you can access the code I used to calculate the SAVI statistics using Landsat images.</p>
<p>I clipped both data sets with a shapefile of the Qazvin Aquifer that I created in ArcGIS using a map from Mirhashemi &amp; Mirzaei (2021) The image and the shapefile can be accessed in this project repository saved as <code>qazvin</code>.</p>
</section>
<section id="basic-analysis-approach" class="level1">
<h1>Basic Analysis Approach</h1>
<p>I wanted to compare the yearly change in groundwater level, precipitation, and agricultural production in the Qazvin plain. To to this I first had to clean the depth to groundwater data so that I could work with the yearly mean measurement. I accessed the year with <code>separate_wider_delim()</code> and then used the <code>group_by()</code> and <code>summarize()</code> functions to generate a yearly mean depth to groundwater. However, I was interested in the change, so I used a first difference estimator to calculate the change in groundwater depth each year.</p>
<p>I also only wanted to use the AEI over the Qazvin Plain, so I used <code>crop()</code> to clip the AEI raster stack with the Qazvin aquifer shapefile I created. Then I calculated summary statistics across each raster in the stack. I was then able to join the change in groundwater level data with the precipitation and irrigation data.</p>
<section id="multiple-linear-regression-with-aei-mean" class="level2">
<h2 class="anchored" data-anchor-id="multiple-linear-regression-with-aei-mean">Multiple Linear Regression with AEI mean</h2>
<p>I conducted an OLS multiple linear regression with <code>lm()</code> to look at how AEI and precipitation impacted the change in groundwater level. The results of the OLS regression are shown in Figure XYZ. I used <code>ggplot()</code> to create a scatter plot of the mean AEI and groundwater level change over time. Then I used <code>geom_smooth()</code> to plot a linear regression to see how these variables changed over time. The groundwater change slope is negative, and the AEI slope is positive.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>ir_gw_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>The result of the multiple linear regression model are in Table 1, and they indicate that for every 1 ha increase in AEI, there is a 0.01 m decrease in groundwater level. The effect of AEI has a p-value of 0.032, which is small enough that there is statistical significance of this analysis. However, the p-value for annual precipitation is 0.591, meaning that there can be no statistical significance taken from the role of precipitation on groundwater level change. This model had an R^2 value of 0.50 which means it explained 50% of the variation in groundwater level change.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../blog/2023-12-decline-groundwater/images/mod_ir_precip.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption class="figure-caption">Table 1: Results of Multiple Linear Regression of Area Equipped for Irrigation and Precipitation on Groundwater Level Change</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../blog/2023-12-decline-groundwater/images/mod_ir.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption class="figure-caption">Table 2: Results of Simple Linear Regression of Area Equipped on Irrigation on Groundwater Level Change</figcaption>
</figure>
</div>
<p>Then I ran a simple linear regression model to see the effect of just AEI mean. The results in Table 2 show that the p-value is 0.02, which increases our confidence level that AEI mean is statistically significant. Here, the R^2 value has increased to 0.56, which means this model explains 56% of the variation in groundwater level change. Given the higher R^2 value, this model is more useful than the one that includes precipitation.</p>
</section>
<section id="simple-linear-regression-with-median-soil-adjusted-vegetation-index-savi" class="level2">
<h2 class="anchored" data-anchor-id="simple-linear-regression-with-median-soil-adjusted-vegetation-index-savi">Simple Linear Regression with median Soil Adjusted Vegetation Index (SAVI)</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../blog/2023-12-decline-groundwater/images/buffer_aquifer.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption class="figure-caption">Figure 2: Buffer and Aquifer crop of Landsat satellite image</figcaption>
</figure>
</div>
<p>I was unhappy with the temporal resolution of the irrigation data, since it was an aggregate in 5-year chunks that was already accessing data samples. To have more confidence in my results, I calculated the SAVI from the area of a buffer around the well being used to to collect the groundwater level data, and across the aquifer in Python. Then I extracted summary statistics from each raster.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>savi_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>I fit a linear regression model to the data as seen in Figure 3. This graph indicates that over time the median index value around the groundwater well was decreasing. Since the scale is from 0-1, the table results make more snese when you divide by 10. Reading it that way, for every 0.1 increase in the SAVI index, groundwater levels. The results of the quadratic regression are shown in Table 3, and show a statistically significant effect (p-value of 0.001) of the median SAVI in the buffer on the groundwater levels. Furthermore, the R^2 value is 0.30, which means this model accounts for 30% of the variation in groundwater level change.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../blog/2023-12-decline-groundwater/images/mod_savi.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption class="figure-caption">Table 3: Results of Simple Linear Regression of median Soil Adjusted Vegetation Index (SAVI) on Irrigation on Groundwater Level Change</figcaption>
</figure>
</div>
<p>HYPOTHESIS TESTING</p>
<p>Due to the statistical significance of the median soil adjusted vegetation index and the non-statistical significance of the annual precipitation, we fail to accept the null hypothesis.</p>
<p><em>Null Hypothesis:</em> In the Qazvin Plain, there is no difference of the impact of annual precipitaion and agricultural production changes on groundwater level changes from 1984-2019.</p>
<p><em>Alternative Hypothesis:</em> In the Qazvin Plain, there is a difference of the impact of annual precipitation and agricultural production on groundwater level changes from 1984-2019.</p>
<p>CONFIDENCE INTERVAL</p>
<p>I calculated a confidence interval and am 95% confident that the true change in groundwater level for every 0.1 increase in the median SAVI, is within the range of 1.6 and 5.5m.</p>
</section>
</section>
<section id="conclusions-and-future-analysis" class="level1">
<h1>Conclusions and Future Analysis</h1>
<p>This analysis showed that agricultural production (using <strong>area equipped for irrigation (AEI)</strong> and <strong>soil adjusted vegetation index (SAVI)</strong> as proxy) had a greater impact on groundwater level changes in the Qazvin Plain aquifer than precipitation.</p>
<p><strong>IMPORTANT LIMITATIONS</strong></p>
<p>In this analysis, I was only able to calculate the relationship between median SAVI and groundwater level change. The positive relationship between these variables is surprising, since I expected that an increase in SAVI would lead to greater negative groundwater change. My analysis does not take into account a possible <strong>lag</strong> in the effect of groundwater-fed irrigation on crop production (which influences SAVI values) and groundwater level changes. This relationship may also be explained by a possible quadratic fit for the median SAVI values over time. Around the early 2000’s, the median SAVI values begin to show an upward trend. This is supported by the literature that indicates that agriculture activities have become more expansive. Given more time I would have liked to explore this potential trend.</p>
<p>Furthermore, I used available literature to decide on the month that I would select to investigate the soil adjusted vegetation index. I selected the month when a majority of the crops were going to be harvested, as I assumed that it would be the best measure of amount of agricultural production. A more specific measure would involve analyzing landsat images over the whole year, over time, to see what the reflectance values for that specific area were, and how those values correlated with crop production on the ground. I was unable to conduct that land classification.</p>
<p><strong>ANALYSIS OF GROUNDWATER DECLINES</strong></p>
<p>In a future analysis I would like to collect depth to groundwater data for multiple wells over time, and see if there is a spatial relationship with changes in agriculture over that same time period (eg. shifting crop types, expansion or decline of area cultivated, irrigation system). Ideally, I could group these aquifers into climate types (eg. arid) so that any relationships could be understood within the type of climate that the aquifer is in. This would provide insight into the mechanisms of groundwater decline and a roadmap to uncover groundwater management strategies in areas where there is either no groundater decline or levels are in recovery.</p>
<p>It would also be interesting to obtain more data on groundwater level from wells around different aquifers and use Kriging to identify the spatial correlation between groundwater levels and different land cover types around the aquifer. Identifying how different land-cover types impact groundwater can be important considerations for future development.</p>
<section id="data-availability" class="level4">
<h4 class="anchored" data-anchor-id="data-availability">Data Availability</h4>
<p>Data can be accessed from the sources described in the Data Sources section of this blog. The grondwater level time series data is not publicly available.</p>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<p>Babaee, S., Mousavi, Z., Masoumi, Z., Malekshah, A. H., Roostaei, M., &amp; Aflaki, M. (2020). Land subsidence from interferometric SAR and groundwater patterns in the Qazvin plain, Iran. International Journal of Remote Sensing, 41(12), 4780-4798.</p>
<p>James, I., &amp; Elfers, S. (2015). <em>Pumped Dry: The global crisis of vanishing groundwater</em>. Pulitzer Center. https://pulitzercenter.org/projects/pumped-dry-global-crisis-vanishing-groundwater.</p>
<p>Karger, D.N., Wilson, A.M., Mahony, C. <em>et al.</em> (2021). Global daily 1 km land surface precipitation based on cloud cover-informed downscaling. <em>Sci Data</em> <strong>8</strong>, 307. https://doi.org/10.1038/s41597-021-01084-6</p>
<p>Mehta, P., Siebert, S., Kummu, M., Deng, Q., Ali, T., Marston, L., Xie, W., &amp; Davis, K. (2023). Global Area Equipped for Irrigation Dataset 1900-2015 (Version 3) [Data set]. Zenodo. https://doi.org/10.5281/zenodo.7809342</p>
<p>Mirhashemi, S. H., &amp; Mirzaei, F. (2021). Extracting association rules from changes in aquifer drawdown in irrigation areas of Qazvin plain, Iran. Groundwater for Sustainable Development, 12, 100495.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>I used NDVI initially but realized that there was very sparse vegetation in the area and so I would want to account for the soil reflectance.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{herschenfeld-catalán2023,
  author = {Herschenfeld-Catalán, Luna},
  title = {Climatic {Trends} and {Agriculture} {Expansion} on
    {Declining} {Water} {Levels} in {Arid} {Aquifer,} {Iran}},
  date = {2023-12-14},
  url = {https://lunacatalan.github.io/blog/2023-12-decline-groundwater/index.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-herschenfeld-catalán2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Herschenfeld-Catalán, Luna. 2023. <span>“Climatic Trends and Agriculture
Expansion on Declining Water Levels in Arid Aquifer, Iran.”</span>
December 14, 2023. <a href="https://lunacatalan.github.io/blog/2023-12-decline-groundwater/index.html">https://lunacatalan.github.io/blog/2023-12-decline-groundwater/index.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Copyright 2021, Luna Catalán
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lunacatalan">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>